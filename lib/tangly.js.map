{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap fa5c09f9cd548d5f281e","webpack:///./src/crypto.js","webpack:///./src/index.js","webpack:///external \"CryptoJS\"","webpack:///./src/iota.js","webpack:///external \"IOTA\"","webpack:///./src/util/format.js"],"names":["iota","IOTA","encrypt","seed","data","CryptoJS","AES","JSON","stringify","toString","decrypt","encryptedData","bytes","parse","enc","Utf8","generateSecretKey","replace","c","crypto","getRandomValues","Uint8Array","generateHash","secret","SHA256","generateTag","tagSuffix","hash","trytes","utils","toTrytes","trimmedTrytes","slice","finalTag","Tangly","constructor","config","node","tagSecret","createTag","searchTag","tag","findTransaction","insert","options","console","log","dataObject","attachedData","attachToTangle","find","field","history","timestamp","accountData","getAccountData","rawMessages","extractTransferMessages","formattedData","untangle","Iota","Promise","resolve","reject","api","err","getNewAddress","address","sendTransfer","transferData","transferObject","transfers","reduce","acc","transfer","message","extractJson","decryptedMessage","push","fromTrytes","text","findTransactionObjects","tags","transactions","newAddress","mergeMessagesWithHistory","messages","key","value","mergeMessagesWithoutHistory","separateObjects","Object","keys","length","item","separatedMessages","finalObject"],"mappings":"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","file":"tangly.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"CryptoJS\"), require(\"IOTA\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"tangly\", [\"CryptoJS\", \"IOTA\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"tangly\"] = factory(require(\"CryptoJS\"), require(\"IOTA\"));\n\telse\n\t\troot[\"tangly\"] = factory(root[\"CryptoJS\"], root[\"IOTA\"]);\n})(typeof self !== 'undefined' ? self : this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap fa5c09f9cd548d5f281e","import CryptoJS from 'crypto-js';\nimport Iota from '../src/iota';\n\nconst iota = new IOTA();\n\nexport function encrypt(seed, data) {\n  return CryptoJS.AES.encrypt(JSON.stringify(data), seed).toString();\n}\n\nexport function decrypt(seed, encryptedData) {\n  var bytes = CryptoJS.AES.decrypt(encryptedData.toString(), seed);\n  return JSON.parse(bytes.toString(CryptoJS.enc.Utf8));\n}\n\nexport function generateSecretKey() {\n  return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  )\n}\n\nexport function generateHash(seed, secret) {\n  return CryptoJS.SHA256(secret + seed).toString()\n}\n\nexport function generateTag(seed, secret, tagSuffix=\"999\") {\n  // use a seed and a secret token to generate a 24 character tryte. 3 extra characters can be added for querying purposes.\n  const hash = CryptoJS.SHA256(secret + seed).toString();\n  const trytes = iota.utils.toTrytes(hash);\n  const trimmedTrytes = trytes.slice(0, 24);\n  const finalTag = trimmedTrytes + tagSuffix;\n\n  return finalTag;\n}\n\n\n// WEBPACK FOOTER //\n// ./src/crypto.js","import { encrypt, decrypt, generateTag, generateSecretKey } from './crypto';\nimport Iota from './iota';\nimport { untangle } from './util/format';\n\nexport default class Tangly {\n  constructor(config) {\n    this.seed = config.seed;\n    this.node = config.node;\n    this.tagSecret = config.tagSecret;\n    this.iota = new Iota(this.node, this.seed, this.tagSecret);\n  }\n\n  createTag(tagSuffix) {\n    return this.iota.generateTag(tagSuffix);\n  }\n\n  async searchTag(tag) {\n    return await this.iota.findTransaction(tag);\n  }\n\n  async insert(data, options) {\n    console.log(\"INSERTING...\");\n    const encryptedData = encrypt(this.seed, data);\n    console.log(`encrypted data: ${encryptedData}`);\n    const dataObject = { encryptedData };\n    const attachedData = await this.iota.attachToTangle(dataObject, options);\n\n    return attachedData;\n  }\n\n  async find(field, options={ history: false, timestamp: true }) {\n    console.log(\"finding fields...\")\n    const accountData = await this.iota.getAccountData();\n    console.log(`accountData: ${ JSON.stringify(accountData) }`);\n    const rawMessages = this.iota.extractTransferMessages(accountData);\n    const formattedData = untangle(rawMessages, options);\n\n    return formattedData;\n    console.log(`raw messages: ${JSON.stringify(rawMessages)}`);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"CryptoJS\"\n// module id = 2\n// module chunks = 0","import IOTA from 'iota.lib.js';\nimport { decrypt, generateHash } from './crypto.js';\n\nexport default class Iota {\n  constructor(node, seed, tagSecret) {\n    this.iota = new IOTA({\n      'provider': node\n    });\n    this.seed = seed;\n    this.tagSecret = tagSecret;\n  }\n\n  getAccountData() {\n    return new Promise((resolve, reject) => {\n      return this.iota.api.getAccountData(this.seed, {}, function (err, accountData) {\n        if (err) {\n          console.log(err)\n          return reject(err);\n        }\n        return resolve(accountData);\n      })\n    })\n  }\n\n  getNewAddress() {\n    return new Promise((resolve, reject) => {\n      return this.iota.api.getNewAddress(this.seed, (err, address) => {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(address);\n      })\n    })\n  }\n\n  sendTransfer(transferData) {\n    return new Promise((resolve, reject) => {\n      return this.iota.api.sendTransfer(this.seed, 3, 14, transferData, (err, transferObject) => {\n        debugger;\n        if (err) {\n          return reject(err);\n        }\n        return resolve(transferObject);\n      })\n    })\n  }\n\n  extractTransferMessages(accountData) {\n    return accountData.transfers.reduce((acc, transfer) => {\n      let message = this.iota.utils.extractJson(transfer);\n      if (message === null) return;\n\n      message = JSON.parse(message);\n      if (message.encryptedData) {\n        const decryptedMessage = decrypt(this.seed, message.encryptedData);\n        acc.push(decryptedMessage);\n\n        return acc;\n      }\n    }, [])\n  }\n\n  fromTrytes(trytes) {\n    return this.iota.utils.fromTrytes(trytes)\n  }\n\n  toTrytes(text) {\n    return this.iota.utils.toTrytes(text)\n  }\n\n  findTransaction(tag) {\n    return new Promise((resolve, reject) => {\n      return this.iota.api.findTransactionObjects({ tags: [ tag ]}, (err, transactions) => {\n        if (err) {\n          console.log(err)\n          return reject(err);\n        }\n        return resolve(transactions);\n      })\n    })\n  }\n\n  generateTag(tagSuffix = \"999\") {\n    // use a seed and a secret token to generate a 24 character tryte. 3 extra characters can be added for querying purposes.\n    const hash = generateHash(this.seed, this.tagSecret);\n    const trytes = this.iota.utils.toTrytes(hash);\n    const trimmedTrytes = trytes.slice(0, 24);\n    const finalTag = trimmedTrytes + tagSuffix;\n\n    return finalTag;\n  }\n\n  async attachToTangle(data, options) {\n    const newAddress = await this.getNewAddress();\n    const transferData = [{\n      'address': newAddress,\n      'value': 0,\n      'message': this.iota.utils.toTrytes(JSON.stringify(data)),\n      'tag': this.generateTag(options.tagSuffix)\n    }]\n    return await this.sendTransfer(transferData)\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/iota.js","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"IOTA\"\n// module id = 4\n// module chunks = 0","\nfunction mergeMessagesWithHistory(messages) {\n  return messages.reduce((acc, message) => {\n    for (let key in message) {\n      // if the property already exists in the acc, add it to the history of the new object and\n      // replace the old object with the new in the acc\n      if (acc[key]) {\n        message.history.push({\n          value: acc[key]\n        })\n      }\n      acc[key] = message[key];\n    }\n    return acc;\n  }, {})\n}\n\nfunction mergeMessagesWithoutHistory(messages) {\n  return messages.reduce((acc, message) => {\n    for (let key in message) {\n      acc[key] = {\n        value: message[key]\n      }\n    }\n    return acc;\n  }, {})\n}\n\nfunction separateObjects(messages) {\n  return messages.reduce((acc, message) => {\n    if (Object.keys(message).length <= 1) {\n      acc.push(message);\n\n      return acc;\n    }\n    for (let item in message) {\n      acc.push({ [item]: message[item] });\n    }\n\n    return acc;\n  }, [])\n};\n\nexport function untangle(messages, options) {\n  const separatedMessages = separateObjects(messages);\n  const finalObject = mergeMessagesWithoutHistory(separatedMessages);\n  console.log(`Final Object: ${ JSON.stringify(finalObject) }`)\n}\n\n\n// WEBPACK FOOTER //\n// ./src/util/format.js"],"sourceRoot":""}